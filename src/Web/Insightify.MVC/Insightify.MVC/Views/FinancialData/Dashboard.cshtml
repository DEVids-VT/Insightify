@using Insightify.Framework.Pagination;
@using Insightify.MVC.Models.FinancialData;
@using Insightify.Web.Gateway.Models.FinancialData;
@using System.Text;
@model DashboardModel

<div class="flexbox">
    <section class="single-cards">
        @{
            foreach (var item in Model.Currencies)
            {
                <div class="crypto-card card">
                    <div class="top-area">
                        <div class="image-container">
                            <img src="@item.Image" />
                        </div>
                        <button>Details</button>
                    </div>
                    <div class="bottom-area">
                        <h5>@item.Name</h5>
                        <div class="price-holder">
                            <h4>@item.CurrentPrice</h4>
                            <h7>@item.PriceChange</h7>
                        </div>
                    </div>
                </div>
            }
        }
    </section>
    <section class="chart-cards">
        <section class="price-cards">
            <div id="price-card" class="price-card card">
            </div>
            <div id="change-card" class="change-card card">
            </div>
        </section>
        <section class="market-cards">
            <div id="status-card" class="status-card card">
            </div>
            <div id="analytics-card" class="analytics-card card">
            </div>
        </section>
    </section>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
    @{
        var values = new StringBuilder();
        values.AppendLine("[");
        foreach (var item in Model.ChartData.Prices)
        {
            values.AppendLine($"{{ time: {item.Timestamp}, value: {item.Value} }},");
        }
        values.AppendLine("]");
    }
            var testData = @values.ToString();
        createChat(testData, 'price-card', 'Light', '400', '800');
        createChat(testData, 'change-card', 'Light', '400', '800');
        createChat(testData, 'status-card', 'Light', '400', '800');
        createChat(testData, 'analytics-card', 'Light', '400', '800');
    });

</script>
